

#$HADOOP_HOME/sbin/start-dfs.sh \
#   && $HADOOP_HOME/sbin/start-yarn.sh
#echo WAIT TIL BOOT && sleep 60

hadoop_init && sleep 60

cd ~hadoop/software/Hadoop_Program_Java \
   && javac -d . SalesMapper.java SalesCountryReducer.java SalesCountryDriver.java \
   && echo "Main-Class: SalesCountry.SalesCountryDriver" > Manifest.txt \
   && jar cfm ProductSalePerCountry.jar Manifest.txt SalesCountry/*.class

verify ./ProductSalePerCountry.jar \
   && RUN_NO=-001 \
   && MAP_REDUCE_IN=MAP_REDUCE_IN${RUN_NO} \
   && MAP_REDUCE_OUT=mapreduce_output_sales${RUN_NO} \
   && MAP_REDUCE_PATH="/" \
   && LOCAL_IN_DIR=~/${MAP_REDUCE_IN} \
   && if [ ! -d ${LOCAL_IN_DIR} ]; then mkdir ${LOCAL_IN_DIR}; fi; cp SalesJan2009.csv ${LOCAL_IN_DIR} \
   && $HADOOP_HOME/bin/hdfs dfs -copyFromLocal ${LOCAL_IN_DIR} ${MAP_REDUCE_PATH} \
   && $HADOOP_HOME/bin/hdfs dfs -ls ${MAP_REDUCE_PATH}${MAP_REDUCE_IN} \
   && $HADOOP_HOME/bin/hadoop jar ProductSalePerCountry.jar ${MAP_REDUCE_PATH}${MAP_REDUCE_IN} ${MAP_REDUCE_PATH}${MAP_REDUCE_OUT} \
   && $HADOOP_HOME/bin/hdfs dfs -cat /${MAP_REDUCE_OUT}/part-00000


#$HADOOP_HOME/sbin/stop-dfs.sh \
#   && $HADOOP_HOME/sbin/stop-yarn.sh


